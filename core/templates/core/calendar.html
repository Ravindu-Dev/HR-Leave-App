{% extends 'core/base.html' %}

{% block content %}
<div class="mb-4">
    <a href="{% url 'manager_dashboard' %}" class="btn btn-outline-secondary btn-sm rounded-pill px-3 shadow">
        <i class="bi bi-arrow-left me-1"></i> Back to Dashboard
    </a>
</div>

<div class="card shadow border-0">
    <div class="card-header bg-white py-4 px-4 d-flex justify-content-between align-items-center premium-glass">
        <div>
            <h5 class="fw-bold mb-1 page-title">Team Calendar</h5>
            <p class="text-muted small mb-0">Visual overview of team availability</p>
        </div>
        <span class="badge premium-badge px-3 py-2 rounded-pill shadow">
            <i class="bi bi-circle-fill me-1 small"></i> Away / On Leave
        </span>
    </div>
    <div class="card-body p-4 premium-glass">
        <div id="calendar" style="height: 650px;"></div>
    </div>
</div>

<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            events: '{% url "calendar_api" %}',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek'
            },
            height: 650,
            themeSystem: 'bootstrap5',
            eventColor: '#dc3545',
            eventDisplay: 'block',
            eventTimeFormat: { // like '7pm'
                hour: 'numeric',
                minute: '2-digit',
                meridiem: 'short'
            }
        });
        calendar.render();
    });
</script>
<style>
    /* Force Premium Style on Calendar Buttons */
    .fc .fc-button-primary {
        background: var(--premium-gradient) !important;
        border: none !important;
        color: #fff !important;
        box-shadow: 0 2px 8px rgba(44, 62, 80, 0.12);
        font-weight: 600;
        letter-spacing: 0.02em;
        opacity: 1;
    }

    .fc .fc-button-primary:hover {
        background: linear-gradient(90deg, #1e40af 0%, #6d28d9 100%) !important;
        border: none !important;
    }

    .fc .fc-button-active {
        background-color: var(--primary-dark) !important;
        border-color: var(--primary-dark) !important;
    }

    /* Hide the default ugly focus outline */
    .fc .fc-button:focus {
        box-shadow: 0 0 0 0.25rem rgba(37, 99, 235, 0.5) !important;
    }
</style>
{% endblock %}